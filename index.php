<?php  
//tracy-developer tool
require __DIR__ . '/vendor/autoload.php';
include 'demo.php';

use Tracy\Debugger;
Debugger::enable(Debugger::DEVELOPMENT);
?>

<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title>112 pramen Flickr gallery</title>
	
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Nunito+Sans&display=swap" rel="stylesheet"> 
	<link rel="stylesheet" type="text/css" href="assets/gallery_style.css">
</head>
<body>
	<div class="dialog text-center" style="display:none;">
		Odkaz bol skopirovany do schranky.
	</div>
<div class="buttons">
	<div class="previousGallery" style="display: none;" title="Novšia galéria"><a href=""><div class="galleryPreviousButton"></div></a></div>
	<a class="galleryButton" href="/">Späť na albumy</a>
	<div class="nextGallery" style="display: none;" title="Staršia galéria"><a href=""><div class="galleryNextButton"></div></a></div>
</div>
<div class="album-header">
	<div>
		<h1 class="album-header-title"></h1>
		<p class="album-header-description"></p>
		<a href="#" class="album-share" title="Zdieľať galériu"></a>
	</div>
</div>

<div class="demo">
	<div class="customCover">
		<div class="customGal">
			<div id="72157716208936413" gallerynumber="0" class="customAlb" style="background-image: url(&quot;https://farm66.staticflickr.com/65535/50404830328_14dafbaee0_w.jpg&quot;);"></div>
			<div class="customDesc">
				<div class="">
					<a>Otvorenie skautského roka 2020/21</a>
				</div>
			</div>
			<div class="customInfo">
				<span class="customSum">
					88 fotiek
				</span>
				<span class="customShare">
					Zdieľať
				</span>
			</div>
		</div>
	</div>
	<div style="margin: 10px;width: 20%;">
		<div class="customGal">
			<div id="72157716208936413" gallerynumber="0" class="customAlb" style="background-image: url(&quot;https://farm66.staticflickr.com/65535/50404830328_14dafbaee0_w.jpg&quot;);">
				<div class="">
				</div>
			</div>
			<div class="customDesc">
				<div class="">
					<a>Otvorenie skautského roka 2020/21</a>
				</div>
			</div>
			<div class="customInfo">
				<span class="customSum">
					88 fotiek
				</span>
				<span class="customShare">
					Zdieľať
				</span>
			</div>
		</div>
	</div>
	<div style="margin: 10px;width: 20%;">
		<div class="customGal">
			<div id="72157716208936413" gallerynumber="0" class="customAlb" style="background-image: url(&quot;https://farm66.staticflickr.com/65535/50404830328_14dafbaee0_w.jpg&quot;);">
				<div class="">
				</div>
			</div>
			<div class="customDesc">
				<div class="">
					<a>Otvorenie skautského roka 2020/21</a>
				</div>
			</div>
			<div class="customInfo">
				<span class="customSum">
					88 fotiek
				</span>
				<span class="customShare">
					Zdieľať
				</span>
			</div>
		</div>
	</div>
	<div style="margin: 10px;width: 20%;">
		<div class="customGal">
			<div id="72157716208936413" gallerynumber="0" class="customAlb" style="background-image: url(&quot;https://farm66.staticflickr.com/65535/50404830328_14dafbaee0_w.jpg&quot;);">
				<div class="">
				</div>
			</div>
			<div class="customDesc">
				<div class="">
					<a>Otvorenie skautského roka 2020/21</a>
				</div>
			</div>
			<div class="customInfo">
				<span class="customSum">
					88 fotiek
				</span>
				<span class="customShare">
					Zdieľať
				</span>
			</div>
		</div>
	</div>
	<div style="margin: 10px;width: 20%;">
		<div class="customGal">
			<div id="72157716208936413" gallerynumber="0" class="customAlb" style="background-image: url(&quot;https://farm66.staticflickr.com/65535/50404830328_14dafbaee0_w.jpg&quot;);">
				<div class="">
				</div>
			</div>
			<div class="customDesc">
				<div class="">
					<a>Otvorenie skautského roka 2020/21</a>
				</div>
			</div>
			<div class="customInfo">
				<span class="customSum">
					88 fotiek
				</span>
				<span class="customShare">
					Zdieľať
				</span>
			</div>
		</div>
	</div>
	<div style="margin: 10px;width: 20%;">
		<div class="customGal">
			<div id="72157716208936413" gallerynumber="0" class="customAlb" style="background-image: url(&quot;https://farm66.staticflickr.com/65535/50404830328_14dafbaee0_w.jpg&quot;);">
				<div class="">
				</div>
			</div>
			<div class="customDesc">
				<div class="">
					<a>Otvorenie skautského roka 2020/21</a>
				</div>
			</div>
			<div class="customInfo">
				<span class="customSum">
					88 fotiek
				</span>
				<span class="customShare">
					Zdieľať
				</span>
			</div>
		</div>
	</div>
	<div style="margin: 10px;width: 20%;">
	<div class="customGal">
		<div id="72157716208936413" gallerynumber="0" class="customAlb" style="background-image: url(&quot;https://farm66.staticflickr.com/65535/50404830328_14dafbaee0_w.jpg&quot;);">
			<div class="">
			</div>
		</div>
		<div class="customDesc">
			<div class="">
				<a>Otvorenie skautského roka 2020/21</a>
			</div>
		</div>
		<div class="customInfo">
			<span class="customSum">
				88 fotiek
			</span>
			<span class="customShare">
				Zdieľať
			</span>
		</div>
	</div>
	</div>
</div>

<div id="customMyGallery" >

<?php
$api_key='4ae001246d441920120d36bf2086a92d';	
$x = json_decode(file_get_contents('https://www.flickr.com/services/rest/?method=flickr.photosets.getList&api_key='.$api_key.'&user_id=147245078%40N03&format=json&nojsoncallback=1'));

Debugger::barDump($_REQUEST,'req');
Debugger::barDump($x->photosets->photoset[0],'object');

if (array_key_exists('id', $_REQUEST)) {
	Debugger::fireLog('funguje to');
	$photos = json_decode(file_get_contents( 'https://www.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key='.$api_key.'&photoset_id='.$_REQUEST['id'].'&user_id=147245078%40N03&format=json&nojsoncallback=1'));
	foreach ($photos->photoset->photo as $photo) {
		$farm_id=$photo->farm;
		$server_id=$photo->server;
		$photo_id=$photo->id;
		$secret=$photo->secret;
		$size='q';
	
		echo '<a class="img-container" title="'.$photo->id.'" href="?id='.$photo->id.'">
				<img src="'.Demo::createPhotos($farm_id,$server_id,$photo_id,$secret,$size).'">
			</a>';
			
	}
	Debugger::barDump($photos->photoset->photo,'photos');
} else {

	foreach ($x->photosets->photoset as $key=>$photoset) {
		Debugger::barDump($photoset);
		$farm_id=$photoset->farm;
		$server_id=$photoset->server;
		$photo_id=$photoset->primary;
		$secret=$photoset->secret;
		$size='w';
	
		echo '
		<div class="customCover">
			<div class="customGal">
				<img id="'.$photoset->id.'" gallerynumber="'.$key.'" class="customAlb"src="'.Demo::createPhotos($farm_id,$server_id,$photo_id,$secret,$size).'" alt="">
				<div class="customDesc">
						<a>'.$photoset->title->_content.'</a>
				</div>
				<div class="customInfo">
					<span class="customSum">
					'.$photoset->count_photos.' fotiek
					</span>
					<span class="customShare">
						Zdieľať
					</span>
				</div>
			</div>
		</div>
		
		';
			// <div id="72157716208936413" gallerynumber="0" class="album" style="background-image: url(&quot;https://farm5.staticflickr.com//65535//50404830328_14dafbaee0_n.jpg&quot;);"><div class="galleryBackground"><div class="galleryInfo"><div class="galleryDesc"><a>Otvorenie skautského roka 2020/21</a></div><button class="shareButton plain-button" title="Zdieľať galériu" style="height: 0px;"><a class="shareGallery"></a></button></div></div></div>
	}
}

/*


		<div id="'.$id.'" gallerynumber="'.$key.'" class="album" style="background-image: url(&quot;'.Demo::createPhotos($farm_id,$server_id,$photo_id,$secret,$size).'&quot;);">
		<div class="galleryBackground"><div class="galleryInfo">
		<div class="galleryDesc">
			<a>'.$photoset->title->_content.'</a>
		</div>
		<button class="shareButton plain-button" title="Zdieľať galériu" style="height: 0px;"><a class="shareGallery"></a></button>
		</div></div>
		</div>

foreach ($photosets->photoset as $value) {
	$photoset_id = 	$value->id;
	
	Debugger::barDump($photoset_id,'photoset');

	$url='https://www.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key='.$api_key.'&photoset_id='.$photoset_id.'&user_id=147245078%40N03&format=json&nojsoncallback=1';
	$data = json_decode(file_get_contents($url));

	for ($i=0; $i < 2; $i++) { 
		$farm_id=$data->photoset->photo[$i]->farm;
		$server_id=$data->photoset->photo[$i]->server;
		$photo_id=$data->photoset->photo[$i]->id;
		$secret=$data->photoset->photo[$i]->secret;
		$size='m';
		$img = 'https://farm'.$farm_id.'.staticflickr.com/'.$server_id.'/'.$photo_id.'_'.$secret.'_'.$size.'.jpg';
		echo '<img src="'.$img.'">';
	}
break;
}
*/
 

//api key 			4ae001246d441920120d36bf2086a92d
//secret api key 	d663ff1650c4ea2b 
//userid 			147245078@N03
?>
</div>

<script type="text/javascript" src="assets/jquery.min.js"></script>
<script type="text/javascript" src="assets/jquery-ui.min.js"></script>
<script src="assets/gallery_script.js" type="text/javascript"></script>
</body>
</html>
